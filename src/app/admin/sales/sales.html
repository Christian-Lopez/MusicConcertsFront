<div class="sales-container">
  <section class="filter-section">
    <h2>Filtros</h2>
    <form [formGroup]="filterFormGroup">
      <div class="filter-row">
        <mat-checkbox formControlName="genreEnabled">Género</mat-checkbox>
        <mat-form-field>
          <mat-label>Género</mat-label>
          <mat-select formControlName="genre">
            @for (genre of genres; track $index) {
            <mat-option [value]="genre">{{ genre }}</mat-option>
            }
          </mat-select>
        </mat-form-field>
      </div>

      <div class="filter-row">
        <mat-checkbox formControlName="eventEnabled">Evento</mat-checkbox>
        <mat-form-field>
          <mat-label>Evento</mat-label>
          <input matInput formControlName="event" />
        </mat-form-field>
      </div>

      <div class="filter-row">
        <mat-checkbox formControlName="datesEnabled">Fechas</mat-checkbox>
        <mat-form-field>
          <mat-label>Desde</mat-label>
          <input matInput [matDatepicker]="pickerFrom" formControlName="dateFrom" />
          <mat-datepicker-toggle matIconSuffix [for]="pickerFrom"></mat-datepicker-toggle>
          <mat-datepicker #pickerFrom></mat-datepicker>
        </mat-form-field>
        <mat-form-field>
          <mat-label>Hasta</mat-label>
          <input matInput [matDatepicker]="pickerTo" formControlName="dateTo" />
          <mat-datepicker-toggle matIconSuffix [for]="pickerTo"></mat-datepicker-toggle>
          <mat-datepicker #pickerTo></mat-datepicker>
        </mat-form-field>
        <button mat-flat-button color="primary" (click)="loadSales()">BUSCAR</button>
      </div>
    </form>
  </section>

  <section class="table-section">
    <table mat-table [dataSource]="dataSource" matSort>
      <ng-container matColumnDef="client">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Cliente</th>
        <td mat-cell *matCellDef="let element">{{ element.client }}</td>
      </ng-container>

      <ng-container matColumnDef="event">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Evento</th>
        <td mat-cell *matCellDef="let element">{{ element.event }}</td>
      </ng-container>

      <ng-container matColumnDef="tickets">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Tickets</th>
        <td mat-cell *matCellDef="let element">{{ element.tickets }}</td>
      </ng-container>

      <ng-container matColumnDef="total">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Total</th>
        <td mat-cell *matCellDef="let element">{{ element.total }}</td>
      </ng-container>

      <ng-container matColumnDef="eventDate">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Fecha de Evento</th>
        <td mat-cell *matCellDef="let element">{{ element.eventDate }}</td>
      </ng-container>

      <ng-container matColumnDef="saleDate">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Fecha de Venta</th>
        <td mat-cell *matCellDef="let element">{{ element.saleDate }}</td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>

      <!-- Empty table text -->
      <tr *matNoDataRow>
        <td colspan="6">
          <div class="empty-table">
            <span class="text">No hay datos que coincidan con los filtros</span>
          </div>
        </td>
      </tr>
    </table>
    <mat-paginator [pageSizeOptions]="[5, 10, 25, 100]"></mat-paginator>
  </section>
</div>
