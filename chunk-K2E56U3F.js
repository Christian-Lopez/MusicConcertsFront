import{a as Q,c as X,d as Z}from"./chunk-JUGY2JGS.js";import{a as L,b as j}from"./chunk-CNKM7RGE.js";import{C as B,F as A,a as h,d as x,e as v,g as b,i as E,j as F,q as y,r as W,s as Y,t as S,u as R,v as J,w as K,y as V,z as q}from"./chunk-AIPMVXUC.js";import{C as p,D as M,E as C,Ea as d,Ha as o,Nb as k,Ob as D,Q as s,W as P,fa as g,ga as f,hc as T,ic as N,ja as w,jc as I,ka as t,la as e,lb as H,ma as u,mb as U,qa as O,sa as _}from"./chunk-J7G3BXWQ.js";function ae(r,i){r&1&&(t(0,"mat-error"),o(1,"Contrase\xF1a es requerida"),e())}function se(r,i){r&1&&(t(0,"mat-error"),o(1,"Contrase\xF1a debe tener al menos 8 caracteres"),e())}function le(r,i){r&1&&(t(0,"mat-error"),o(1,"Contrase\xF1a es requerida"),e())}function ce(r,i){r&1&&(t(0,"mat-error"),o(1,"Contrase\xF1a debe tener al menos 8 caracteres"),e())}function me(r,i){r&1&&(t(0,"mat-error"),o(1,"Las contrase\xF1as no coinciden"),e())}var G=class r{authService=p(I);router=p(H);data=p(X);dialogRef=p(Q);notifications=p(T);resetPassword(i){let n={email:this.data.email,token:i.controls.token.value,newPassword:i.controls.password.value,confirmNewPassword:i.controls.confirmPassword.value};this.authService.resetPassword(n).subscribe({next:a=>{a.success?(this.notifications.open("Password updated. Login","Close",{duration:3e3,panelClass:["success-snackbar"]}),this.router.navigateByUrl("/login"),this.dialogRef.close()):(this.notifications.open(a.errorMessage||"Error","Close",{duration:3e3,panelClass:["error-snackbar"]}),console.log(a.errorMessage))},error:a=>{let l=a.error.errorMessage;this.notifications.open(l,"Close",{duration:3e3,panelClass:["error-snackbar"]}),console.error("HTTP Error during registration:",a)}})}verifyPasswords(i){let n=i.controls.password,a=i.controls.confirmPassword;n&&a&&n.value&&a.value&&n.value===a.value?a.setErrors(null):a.setErrors({mismatch:!0})}static \u0275fac=function(n){return new(n||r)};static \u0275cmp=P({type:r,selectors:[["app-reset-password-dialog"]],decls:33,vars:7,consts:[["resetPasswordForm","ngForm"],["password","ngModel"],["confirmPassword","ngModel"],[1,"card"],[1,"form-title-container"],["appearance","outline"],["matInput","","disabled","",3,"value"],["type","text","matInput","","ngModel","","name","token","required",""],["type","password","matInput","","ngModel","","name","password","required","","minlength","8",3,"ngModelChange"],["type","password","matInput","","ngModel","","name","confirmPassword","required","","minlength","8",3,"ngModelChange"],["mat-flat-button","",3,"click","disabled"]],template:function(n,a){if(n&1){let l=O();t(0,"div",3)(1,"div",4)(2,"span"),o(3,"RESTABLECER"),e()(),t(4,"form",null,0)(6,"mat-form-field",5)(7,"mat-label"),o(8,"Email"),e(),u(9,"input",6),e(),t(10,"mat-form-field",5)(11,"mat-label"),o(12,"Token"),e(),u(13,"input",7),t(14,"mat-error"),o(15,"Token es requerido"),e()(),t(16,"mat-form-field",5)(17,"mat-label"),o(18,"Contrase\xF1a"),e(),t(19,"input",8,1),_("ngModelChange",function(){M(l);let m=d(5);return C(a.verifyPasswords(m))}),e(),g(21,ae,2,0,"mat-error"),g(22,se,2,0,"mat-error"),e(),t(23,"mat-form-field",5)(24,"mat-label"),o(25,"Confirmar Contrase\xF1a"),e(),t(26,"input",9,2),_("ngModelChange",function(){M(l);let m=d(5);return C(a.verifyPasswords(m))}),e(),g(28,le,2,0,"mat-error"),g(29,ce,2,0,"mat-error"),g(30,me,2,0,"mat-error"),e(),t(31,"button",10),_("click",function(){M(l);let m=d(5);return C(a.resetPassword(m))}),o(32," RESTABLECER "),e()()()}if(n&2){let l=d(5),c=d(20),m=d(27);s(9),w("value",a.data.email),s(12),f(c.hasError("required")?21:-1),s(),f(c.hasError("minlength")?22:-1),s(6),f(m.hasError("required")?28:-1),s(),f(m.hasError("minlength")?29:-1),s(),f(m.hasError("mismatch")?30:-1),s(),w("disabled",l.invalid)}},dependencies:[S,F,h,x,v,y,Y,E,b,A,B,V,q,j,L,R,D,k,N],styles:[".card[_ngcontent-%COMP%]{background-color:var(--secondary-color);border-radius:8px}.card[_ngcontent-%COMP%]   .form-title-container[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:40px;margin-bottom:40px}.card[_ngcontent-%COMP%]   .form-title-container[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--primary-color);font-weight:500}.card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:10px}.card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:10px;width:210px;margin-bottom:40px}"]})};function de(r,i){r&1&&(t(0,"mat-error"),o(1,"Email is required"),e())}function pe(r,i){r&1&&(t(0,"mat-error"),o(1,"Email not valid"),e())}var z=class r{authService=p(I);matDialog=p(Z);notifications=p(T);sendToken(i){this.authService.sendTokenToResetPassword(i).subscribe({next:n=>{n.success?(this.notifications.open("Token Sent. Check your email.","Close",{duration:3e3,panelClass:["success-snackbar"]}),this.matDialog.open(G,{disableClose:!0,data:{email:i}})):(this.notifications.open(n.errorMessage||"Error","Close",{duration:3e3,panelClass:["error-snackbar"]}),console.log(n.errorMessage))},error:n=>{let a=n.error.errorMessage;this.notifications.open(a,"Close",{duration:3e3,panelClass:["error-snackbar"]}),console.error("HTTP Error during registration:",n)}})}static \u0275fac=function(n){return new(n||r)};static \u0275cmp=P({type:r,selectors:[["app-forgot-password-form"]],decls:20,vars:3,consts:[["forgotPasswordForm","ngForm"],["emailInput","ngModel"],[1,"main-container","box-shadow"],[1,"form-container"],[1,"title"],["appearance","outline",1,"email"],[1,"form-label-color"],["type","email","name","email","ngModel","","matInput","","required","","email","",1,"form-input-color"],["mat-raised-button","","color","primary",3,"click","disabled"],[1,"login"],["routerLink","/login"]],template:function(n,a){if(n&1){let l=O();t(0,"div",2)(1,"div",3)(2,"span",4),o(3," FORGOT YOUR PASSWORD "),e(),t(4,"form",null,0)(6,"mat-form-field",5)(7,"mat-label",6),o(8,"Email"),e(),u(9,"input",7,1),e(),g(11,de,2,0,"mat-error"),g(12,pe,2,0,"mat-error"),t(13,"button",8),_("click",function(){M(l);let m=d(10);return C(a.sendToken(m.value))}),o(14," RESET PASSWORD "),e(),t(15,"div",9)(16,"span"),o(17,"If you already have an account "),t(18,"a",10),o(19,"log in"),e()()()()()()}if(n&2){let l=d(5),c=d(10);s(11),f(c.hasError("required")&&c.touched?11:-1),s(),f(c.hasError("email")&&c.touched?12:-1),s(),w("disabled",l.invalid)}},dependencies:[S,F,h,x,v,y,W,E,b,A,B,V,q,j,L,R,D,k,U,N],styles:[".main-container[_ngcontent-%COMP%]{width:300px;height:300px;background-color:var(--secondary-color);border-radius:8px}.main-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]{width:100%;padding-top:36px;text-align:center}.main-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{color:var(--primary-color);font-weight:500;font-size:16px}.main-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{margin-top:20px}.main-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:240px}.main-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .email[_ngcontent-%COMP%], .main-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .document-type[_ngcontent-%COMP%], .main-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .password[_ngcontent-%COMP%]{margin-top:8px}.main-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .password[_ngcontent-%COMP%]   .min-length-error[_ngcontent-%COMP%]{line-height:14px}.main-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:10px;width:240px}.main-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .login[_ngcontent-%COMP%]{margin-top:18px;font-size:12px}.main-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .login[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#fff}.main-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .login[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--accent-color);text-decoration:none}.mat-mdc-raised-button[disabled][_ngcontent-%COMP%], .mat-mdc-raised-button.mat-mdc-button-disabled[_ngcontent-%COMP%]{background-color:var(--primary-color)}"]})};var te=class r{static \u0275fac=function(n){return new(n||r)};static \u0275cmp=P({type:r,selectors:[["app-forgot-password"]],decls:10,vars:0,consts:[[1,"main-container"],["showLogoOnly",""],[1,"title-container"],[1,"title-sub-container"],[1,"title"],[1,"form-container"],[1,"form-sub-container"]],template:function(n,a){n&1&&(t(0,"div",0),u(1,"app-header",1),t(2,"div",2)(3,"div",3)(4,"span",4),o(5,"If you forgot your password, enter the required information to reset your password"),e()()(),t(6,"div",5)(7,"div",6),u(8,"app-forgot-password-form"),e()(),u(9,"app-footer"),e())},dependencies:[J,K,z],styles:[".main-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;flex-direction:column;height:auto;min-height:100%}.title-container[_ngcontent-%COMP%]{display:flex;justify-content:center}.title-container[_ngcontent-%COMP%]   .title-sub-container[_ngcontent-%COMP%]{display:flex;justify-content:center;max-width:1000px;width:100%;padding:20px}.title-container[_ngcontent-%COMP%]   .title-sub-container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:16px;font-weight:500}.form-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;margin-bottom:20%}"]})};export{te as ForgotPassword};
