import{a as z,b as H}from"./chunk-CNKM7RGE.js";import{C as B,F as R,a as x,b as d,d as v,e as h,f as F,h as C,j as y,m as b,n as w,t as E,u as S,v as D,w as j,y as q,z as G}from"./chunk-AIPMVXUC.js";import{C as p,Ha as o,Nb as L,Ob as k,Q as c,W as g,fa as s,ga as m,hc as N,ic as I,ja as u,jc as T,ka as e,la as n,lb as P,ma as l,mb as O,sa as _}from"./chunk-J7G3BXWQ.js";function J(r,a){r&1&&(e(0,"mat-error"),o(1,"Email is required"),n())}function K(r,a){r&1&&(e(0,"mat-error"),o(1,"Email not valid"),n())}function Q(r,a){r&1&&(e(0,"mat-error"),o(1,"Password is required"),n())}function W(r,a){r&1&&(e(0,"mat-error"),o(1,"Password must be at least 8 characters long asdasd asdasd asdasd asd "),n())}var f=class r{authService=p(T);loginForm=new F({email:new C("",[d.required,d.email]),password:new C("",[d.required,d.minLength(8)])});router=p(P);notifications=p(N);login(){let a=this.loginForm.controls.email.value,i=this.loginForm.controls.password.value;this.authService.login(a,i).subscribe({next:t=>{t.success?(localStorage.setItem("token",t.data.token),localStorage.setItem("tokenExpiration",t.data.expirationDate),this.authService.decodeToken(),this.notifications.open("Login sucessfull","Close",{duration:3e3,panelClass:["success-snackbar"]}),this.router.navigateByUrl("/")):(this.notifications.open(t.errorMessage||"Error","Close",{duration:3e3,panelClass:["error-snackbar"]}),console.log(t.errorMessage))},error:t=>{let M="Error at login "+t.error.errorMessage;this.notifications.open(M,"Close",{duration:3e3,panelClass:["error-snackbar"]}),console.error("HTTP Error during login:",t)}})}static \u0275fac=function(i){return new(i||r)};static \u0275cmp=g({type:r,selectors:[["app-login-form"]],decls:28,vars:6,consts:[[1,"content-container","box-shadow"],[1,"card"],[1,"form-title-container"],[3,"formGroup"],["appearance","outline",1,"email"],[1,"form-label-color"],["type","email","matInput","","formControlName","email",1,"form-input-color"],["appearance","outline",1,"password"],["type","password","matInput","","formControlName","password",1,"form-input-color"],[1,"forgot-password"],["routerLink","/forgot-password"],["mat-raised-button","","color","primary",3,"click","disabled"],[1,"register"],["routerLink","/register",1,"text-link"]],template:function(i,t){i&1&&(e(0,"div",0)(1,"div",1)(2,"div",2)(3,"span"),o(4,"Login"),n()(),e(5,"form",3)(6,"mat-form-field",4)(7,"mat-label",5),o(8,"Email"),n(),l(9,"input",6),n(),s(10,J,2,0,"mat-error"),s(11,K,2,0,"mat-error"),e(12,"mat-form-field",7)(13,"mat-label",5),o(14,"Password"),n(),l(15,"input",8),n(),s(16,Q,2,0,"mat-error"),s(17,W,2,0,"mat-error"),e(18,"div",9)(19,"span",10),o(20,"Forgot your password?"),n()(),e(21,"button",11),_("click",function(){return t.login()}),o(22,"LOGIN"),n(),e(23,"div",12)(24,"span"),o(25,"If you don't have an account "),e(26,"span",13),o(27,"register"),n()()()()()()),i&2&&(c(5),u("formGroup",t.loginForm),c(5),m(t.loginForm.controls.email.hasError("required")&&t.loginForm.controls.email.touched?10:-1),c(),m(t.loginForm.controls.email.hasError("email")?11:-1),c(5),m(t.loginForm.controls.password.hasError("required")&&t.loginForm.controls.password.touched?16:-1),c(),m(t.loginForm.controls.password.hasError("minlength")?17:-1),c(4),u("disabled",t.loginForm.invalid))},dependencies:[E,y,x,v,h,R,B,q,G,H,z,S,b,w,k,L,O,I],styles:[".content-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.content-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{background-color:var(--secondary-color);border-radius:8px;width:260px}.content-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .form-title-container[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:40px;margin-bottom:40px}.content-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .form-title-container[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--primary-color);font-weight:500}.content-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.content-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .email[_ngcontent-%COMP%]{margin-bottom:10px}.content-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .forgot-password[_ngcontent-%COMP%]{color:var(--accent-color);font-size:12px;margin-top:16px;margin-bottom:10px}.content-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .forgot-password[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{cursor:pointer}.content-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .register[_ngcontent-%COMP%]{color:#fff;font-size:12px;margin-top:20px;margin-bottom:30px}.content-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .register[_ngcontent-%COMP%]   .text-link[_ngcontent-%COMP%]{color:var(--accent-color);cursor:pointer}"]})};var V=class r{static \u0275fac=function(i){return new(i||r)};static \u0275cmp=g({type:r,selectors:[["app-login"]],decls:10,vars:0,consts:[[1,"main-container"],["showLogoOnly",""],[1,"title-container"],[1,"title-sub-container"],[1,"title"],[1,"form-container"],[1,"form-sub-container"]],template:function(i,t){i&1&&(e(0,"div",0),l(1,"app-header",1),e(2,"div",2)(3,"div",3)(4,"span",4),o(5,"Ingresa a Musical Events para comprar"),n()()(),e(6,"div",5)(7,"div",6),l(8,"app-login-form"),n()(),l(9,"app-footer"),n())},dependencies:[D,j,f],styles:[".main-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;flex-direction:column;height:auto;min-height:100%}.title-container[_ngcontent-%COMP%]{display:flex;justify-content:center}.title-container[_ngcontent-%COMP%]   .title-sub-container[_ngcontent-%COMP%]{display:flex;justify-content:center;max-width:1000px;width:100%;padding:20px}.title-container[_ngcontent-%COMP%]   .title-sub-container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:16px;font-weight:500}.form-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}"]})};export{V as Login};
